# UR4Rec V2 with MoE Configuration for MovieLens-100K - Round 2
# 激进改进以达到70-80% hit@10

# Dataset settings
num_items: 1682
max_seq_len: 50

# SASRec parameters - 大幅增加模型容量
sasrec_hidden_dim: 256  # 从128增加到256
sasrec_num_blocks: 4    # 从3增加到4层
sasrec_num_heads: 8     # 保持8个头
sasrec_dropout: 0.3     # 增加到0.3防止过拟合

# Text encoder parameters
text_model_name: "all-MiniLM-L6-v2"
text_embedding_dim: 384
retriever_output_dim: 256

# MoE parameters
moe_num_heads: 8
moe_dropout: 0.2
moe_num_proxies: 4

# Memory mechanism parameters
max_memory_size: 20
update_trigger: "INTERACTION_COUNT"
interaction_threshold: 5
drift_threshold: 0.3
decay_factor: 0.95

# Fusion parameters
fusion_method: "weighted"
sasrec_weight: 1.0
retriever_weight: 0

# Training parameters - 激进学习率
sasrec_lr: 0.003  # 提高到0.003
retriever_lr: 0.001
use_uncertainty_weighting: false
use_adaptive_alternating: false
adaptive_switch_threshold: 0.01
adaptive_min_steps: 5

# Training stages
stages:
  - pretrain_sasrec

epochs_per_stage: 100
patience: 15  # 增加patience

# Other settings
batch_size: 8   # 减小batch size提高更新频率
num_workers: 4
seed: 42
num_negatives: 50  # 大幅增加负样本到50
